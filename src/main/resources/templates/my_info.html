<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <title>회원정보 상세조회</title>
  <th:block th:insert="~{layout :: head}"></th:block>
</head>

<body>
<!-- 공통 js -->
<th:block th:insert="~{layout :: js}"></th:block>

<section id="container" >
  <!-- 상단바 -->
  <th:block th:insert="~{layout :: navbar}"></th:block>
  <!-- 사이드바 -->
  <th:block th:insert="~{layout :: sidebar}"></th:block>

    <!-- **********************************************************************************************************************************************************
    MAIN CONTENT
    *********************************************************************************************************************************************************** -->
    <!--main content start-->
    <section id="main-content">
        <section class="wrapper">
          <h3><i class="fa fa-angle-right"></i> MY INFORMATION</h3><br>

          <div class="row mt">
            <div class="col-lg-12">
              <div class="form-panel" style="max-width: 1060px; margin: 0 auto; padding-left: 110px;">
              <h4 class="mb"><i class="fa fa-angle-right"></i> 나의 회원정보</h4><br>
                <form class="form-horizontal style-form" method="get">

                  <!-- 아이디 입력 -->
                  <div class="form-group">
                    <label class="col-lg-2 col-sm-2 control-label">아이디</label>
                    <div class="col-lg-10">
                      <p class="form-control-static">buddy123</p>
                    </div>
                  </div>

                  <!-- 이메일 입력 -->
                  <div class="form-group">
                    <label class="col-sm-2 col-sm-2 control-label">이메일</label>
                    <div class="col-sm-7">
                      <input type="text" class="form-control" id="inputUserEmail" value="buddy123@buddy.com">
                    </div>
                  </div>

                  <!-- 닉네임 입력 -->
                  <div class="form-group">
                    <label class="col-sm-2 col-sm-2 control-label">닉네임</label>
                    <div class="col-sm-4">
                      <input type="text" class="form-control" id="inputUserNickname" value="멋쟁이개발자">
                    </div>
                  </div>

                  <!-- 비밀번호 입력 -->
                  <div class="form-group">
                    <label class="col-sm-2 col-sm-2 control-label">수정 비밀번호</label>
                    <div class="col-sm-7">
                      <input type="password" class="form-control" id="inputUserPassword"  placeholder="비밀번호 입력">
                    </div>
                    <br><br><br>
                    <!-- 비밀번호 재입력 -->
                    <label class="col-sm-2 col-sm-2 control-label">비밀번호 재입력</label>
                    <div class="col-sm-7">
                      <input type="password" class="form-control" id="inputUserConfirmPassword" placeholder="비밀번호 재입력">
                      <span class="help-block">비밀번호는 8문자 이상이어야 하며, 1개 이상의 영문자 & 1개 이상의 특수문자가 포함되어야 합니다.</span>
                    </div>
                  </div>

                  <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-7 text-center">
                      <button type="button" class="btn btn-warning btn-lg btn-block" id="ModifyButton" data-toggle="modal" data-target="#confirmModifyModal">회원정보 수정</button>
                    </div>
                  </div>
                </form>
              </div>
            </div><!-- col-lg-12-->
          </div><!-- /row -->
        </section>
      </section>
    <!--main content end-->
  <!-- 푸터 -->
  <th:block th:insert="~{layout :: footer}"></th:block>
</section>

<!-- 회원정보 수정 확인 모달 -->
<div id="confirmModifyModalContainer" th:replace="/confirm_modify_modal :: confirmModifyModal"></div>

<script>
    $(document).ready(function () {
      TaskList.initTaskWidget();
      $('#ModifyButton').on('click', function () {

        var email = $('#inputUserEmail').val();
        var nickname = $('#inputUserNickname').val();
        var password = $('#inputUserPassword').val();
        var confirmPassword = $('#inputUserConfirmPassword').val();

        // 필수 입력 사항이 입력되었는지 확인
        if (email === '' || nickname === '' || password === '' || confirmPassword === '') {
          $('#ModifyModalMessage').html('<p>입력되지 않은 내용이 있습니다. 입력 내용을 다시 확인해 주세요.</p>');
          $('#CancelButton').show();
          $('#GoTodoButton').hide();
          return;
        }

        // 비밀번호와 비밀번호 재입력이 일치하는지 확인
        if (password !== confirmPassword) {
          $('#ModifyModalMessage').html('<p>비밀번호가 일치하지 않습니다. 비밀번호를 다시 확인해 주세요.</p>');
          $('#CancelButton').show();
          $('#GoTodoButton').hide();
          return;
        }

        var passwordPattern = /^(?=.*[a-zA-Z])(?=.*[!@#$%^&*]).{8,}$/;
        if (!passwordPattern.test(password)) {
          $('#ModifyModalMessage').html('<p>비밀번호가 문법에 맞게 작성되지 않았습니다. 비밀번호를 다시 확인해 주세요.</p>');
          $('#CancelButton').show();
          $('#GoTodoButton').hide();
          return;
        }

        // 회원정보 수정 진행
        // 여기에 회원정보 수정 로직을 추가하세요.

        // 회원정보 수정 완료 모달창
        $('#ModifyModalMessage').html('<p>회원정보 수정이 완료되었습니다.</p>');
        $('#GoTodoButton').show(); // 할일 창 가게 표시
        $('#CancelButton').hide();

        // 회원정보 수정이 성공적으로 진행되었으므로 모달의 제목을 '회원가입 완료'로 변경함
        $('#SignupModalLabel').text('회원정보 수정 완료');
      });
    });
</script>

</body>
</html>
